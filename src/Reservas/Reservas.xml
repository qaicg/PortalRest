<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "https://testng.org/testng-1.0.dtd">

<suite name="*Test* Pruebas de Reservas en Booking versión 2 -> Realizar, Modificar y cancelar Reservas (**Servidor Master QA09 -> https://cloudquality03.hiopos.com/portalrest**)" verbose="1" preserve-order="true">
	
	<listeners>
		<listener class-name="com.vimalselvam.testng.listener.ExtentTestNgFormatter" />
	</listeners>
	
	<parameter name="report.config" value="C:\Users\QA\portalrestproject\test-output\extent-config.xml" />
	<parameter name="expectedTitle" value="PortalRest Booking" /> <!--Titulo de la página -->
	<parameter name="titleHeader" value="Ingrese los detalles de su reserva" /> <!-- Titulo formulario Reserva-->
	
	<parameter name="test" value="true" /> <!-- Entorno de test(Master) -->
	<parameter name="urlEmail" value="https://login.yahoo.com/" /> <!-- Enlace del correo electrónico: utilizamos el de yahoo.com -->
	<parameter name="webMailImapConfig" value="imap.mail.yahoo.com" /> <!-- Configuración del imap del correo electrónico -->

	<!-- Informacion del Restaurante -->
		<parameter name="emailRestaurante" value="portalrestcomercio@mailsac.com" /> <!-- el correo elctronico del establecimiento/Restaurante portalrestcomercio@mailsac.com; prtreservascomercio@yahoo.com -->
		<parameter name="passwordRestaurante" value="k_kJafj5UAsHjv3pY68wNCdpvhXbw7RMvUtZolnMQ1dfa" /> <!-- Contraseña yahoo(.1234abcd2023), mailsac(k_kJafj5UAsHjv3pY68wNCdpvhXbw7RMvUtZolnMQ1dfa)-->
		<parameter name="nombreRestaurante" value="hosteleriab9" /> <!-- el nombre del  establecimiento/Restaurante -->
		<parameter name="direccionRestaurante" value="Mestral S/N, 25123 Torrefarrera" /> <!-- Direccion del establecimiento/Restaurante --> 
		<parameter name="telefonoRestaurante" value="973123456" /> <!-- Telefono del cliente -->
		<parameter name="emailNotificacionReservas" value="portalrestcomercio@mailsac.com" /> <!-- El email de notificacion de reservas al restaurante portalrestcomercio@mailsac.com; prtreservascomercio@yahoo.com -->
	
	<!-- FIN Informacion del Restaurante -->
	
	<!-- Informacion del Cliente -->
		<parameter name="telefono" value="666554433" /> <!-- Telefono del cliente -->
		<parameter name="prefijo" value="+34" /> <!-- Prefijo telefónico o indicativo del pais -->
		
		<parameter name="tipoCliente" value="Estándar" /> <!-- indicar el tipo de cliente para la reserva -->
		<parameter name="nombreCliente" value="" /> <!-- Nombre del cliente -->
		
		<parameter name="emailCliente" value="portalrestcliente@mailsac.com" /> <!-- el correo electronico del cliente portalrestcliente@mailsac.com; prtreservascliente@yahoo.com-->
		<parameter name="passwordCliente" value="k_kJafj5UAsHjv3pY68wNCdpvhXbw7RMvUtZolnMQ1dfa" /> <!-- Contraseña yahoo(.1234abcd2023), mailsac(k_kJafj5UAsHjv3pY68wNCdpvhXbw7RMvUtZolnMQ1dfa)-->

	<!-- FIN Informacion del Cliente -->
	
	<!-- Informacion de la Reserva -->
		<parameter name="dia" value="hoy" /> <!-- El dia de la reserva: hoy, si es vacio o null se considera como hoy -->
		<parameter name="hora" value="" /> <!-- Elegir la hora de la reserva-->
		<parameter name="numeroPersona" value="1" /> <!-- El numero de persona para la reserva -->
		<parameter name="sala" value="" /> <!-- la sala de la reserva -->
		
		<parameter name="modo" value="cliente" /> <!-- el modo de acceso a la reserva: admin o cliente -->
		
		<parameter name="literalLocalizador" value="Localizador" /> <!-- Literal del label Localizador-->
		<parameter name="localizador" value="" /> <!-- El campo Localizador  -->
	
		<parameter name="existeRoom" value="false" />
		<parameter name="stringLabelRoom" value="sala" />
		<parameter name="room" value="" /> <!-- Salas activadas en los turnos -->
		
		<parameter name="literalObserciones" value="Observaciones" /> <!-- Literal del label Observaciones-->
		<parameter name="observaciones" value="" /> <!-- El campo Observación  -->

		<parameter name="numeroCliente" value="1" /> <!-- Numero cliente -->
		
		<parameter name="insertBooking" value="true" />  <!-- Creacion de la reserva -->
		<parameter name="iconeNotification" value="check_circle_outline" /> <!-- Icono notificación de confirmación nueva reserva en booking-->
		<parameter name="citaReserva" value="" /> <!-- Cita de la reserve-->
		<parameter name="infoDetails" value="" /> <!-- info detail a validar -->
		
		<parameter name="notificarAlCliente" value="true" /><!-- Enviar una notificacion al email del cliente  -->
		<parameter name="notificarAlRestaurante" value="true" /><!-- Enviar una notificacion al email del restaurante  -->
		<parameter name="notificarAlGrupoRestaurante" value="false" /><!-- Enviar una notificacion al grupo del restaurante si el Pax > 2  -->
		
		<parameter name="confirmacionReseva" value="Tu reserva ha sido confirmada" /><!-- confirmacion de la nueva reserva al cliente/admin-->
		
		<parameter name="ingresarDatosPorDefecto" value="false" /><!-- Seleccionar datos disponibles en Booking para ingresar en la reservaen vez de entrar con parametros   -->
		
		<parameter name="repeatBookingCount" value="2" /><!-- Indicar el numero de reservas a crear en Booking  -->
		
	<!--FIN Informacion de la Reserva -->

	<!-- Informacion de validacion de correo de notitificación al cliente -->
	<parameter name="validateEmailCliente" value="true" /> <!-- -->
	<parameter name="remitenteEmailCliente" value="" /> <!-- Remitente del correo de notificación al cliente-->
	<parameter name="asuntoEmailCliente" value="Confirmación de reservas en {NombreRestaurante}" />
	<parameter name="textConfirmacionReservaAlCliente" value="Estimado {nombreCliente}. {ln}Le confirmamos a continuación los datos de su reserva: {ln}{fechaReserva}, a las {horaReserva}, para {paxPersona} al restaurante {NombreRestaurante}." />
	
	<!-- Fin validacion notitficacion al cliente -->
	
	<!-- Informacion de validacion de correo de notitificacion al restaurante -->
	<parameter name="validateEmailRestaurante" value="true" /> <!--  -->
	<parameter name="remitenteEmailRestaurante" value="" /> <!-- Remitente del correo de notificación al restaurante-->
	<parameter name="asuntoEmailRestaurante" value="Nueva reserva en {NombreRestaurante}" />
	<parameter name="textConfirmacionReservaAlRestaurante" value="Ha entrado una nueva reserva como Confirmado en el restaurante {NombreRestaurante} con los siguientes datos:{ln}{ln}{fechaReserva} {horaReserva}{ln}PAX: {numeroPersona}{ln}{nombreCliente}{ln}{tipoCliente}{ln}{telefonoCliente}{ln}{emailCliente}{ln}{observaciones}" />
	
	<!-- Fin validacion notitficacion al restauranta -->
	
	<parameter name="aceptarTerminosCondiciones" value="true" /> <!-- Aceptar los terminos y condiciones del restaurante-->
	<parameter name="aceptarPoliticaCancelacion" value="true" /> <!-- Aceptar la politica de cancelación del restaurante-->
	<parameter name="aceptarComunicacionesComerciales" value="false" /> <!-- Aceptar recibir las comunicaciones comerciales del restaurante-->
	
	<parameter name="testPlusMenosBtn" value="false" /> <!-- Botones plus menos (- +) -->
	
	<parameter name="resultatEsperado" value="true" /> <!-- -->
	
	<parameter name="modoSinVentana" value="false" /> <!--modo sin ventana para test case o test suite -->
	
	<!-- Comprobar la descaga de correo electronico de yahoo mail-->
	<!--test name="Prueba de reserva simple para connectar en webmail yahoo" enabled="true" preserve-order="true">
		<parameter name="Url" value="https://booking00.hiopos.com/booking?data=%3D%3DQZzxWYm1jbp1GZhZSO2EDN2ETPklEcvh2c" />
		<parameter name="shop" value="43496" />
		
		<classes>
			<class name="Reservas.MailReading">
				<methods>
					<include name="readEmailClient"></include>
				</methods>
			</class>
		</classes>
		
	</test -->
	<!-- -->

	<!-- Prueba  de Reserva simple con salas  y entrada de datos parametrados -->
	<test name="Prueba de reserva con sala, ingresar datos parametrados y validar campos requeridos" enabled="true" preserve-order="true">
		<parameter name="Url" value="https://booking00.hiopos.com/booking?data=%3D%3DQZzxWYm1jbp1GZhZSO2EDN2ETPklEcvh2c" />
		<parameter name="shop" value="43496" />
		<parameter name="existeRoom" value="true" />
		<parameter name="insertBooking" value="true" />
		
		<classes>
			<class name="AbrePortalRest.AbrirUrl" />
			<class name="Verificaciones.VerificarCookies" />
			<class name="Reservas.Reserva">
				<methods>
					<parameter name="room" value="Piscina" />
					<parameter name="dia" value="02/03/2023" />
					<parameter name="hora" value="14:00" />
					<parameter name="numeroCliente" value="1" />
					<parameter name="citaReserva" value="jueves, 2 de marzo de 2023" />
					<parameter name="infoDetails" value="persona a las" />
					
					<parameter name="testPlusMenosBtn" value="false" />
					
					<include name="selectedDay" />
					
					<include name="inputNumberPerson">
						<parameter name="numeroCliente" value="1" />
					</include>
					
					<include name="selectRoom" />
					<include name="selectHour" />
					<include name="realizarReserva">
						<parameter name="resultatEsperado" value="true" />
					</include>
					<include name="createBooking">
						<parameter name="aceptarComunicacionesComerciales" value="true" />
					</include>
					
					<!--include name="emailClientBooking">
						<parameter name="validateEmailRestaurante" value="false" />
					</include>
					
					<include name="emailRestaurantBooking">
						<parameter name="validateEmailCliente" value="false" />
					</include-->
									</methods>
			</class>
			
			<!--class name="Reservas.VerificarReservas">
				<methods>
				
					<include name="validateBookingContentEmail">
						<parameter name="validateEmailRestaurante" value="true"/>
					</include>
					
					<include name="validationBookingBB"></include>
				</methods>
			</class-->
			<!-- FIN -->
			
		</classes>
	
	</test>
	<!-- -->
	
	<!-- Realizar nuevas reserva sin datos parametrados(Sala, Hora, día y hora ) -->
	<test name="Prueba de realizar nueva reserva simple con sala, sin datos parametrados" enabled="true" preserve-order="true">
		<parameter name="Url" value="https://booking00.hiopos.com/booking?data=%3D%3DQZzxWYm1jbp1GZhZSO2EDN2ETPklEcvh2c" />
		<parameter name="shop" value="43496" />
		<parameter name="existeRoom" value="true" />
		<parameter name="insertBooking" value="true" />
		<parameter name="ingresarDatosPorDefecto" value="true" /><!-- Seleccionar datos disponible a ingresar en la reserva   -->
		
		<classes>
			<class name="AbrePortalRest.AbrirUrl" />
			<class name="Verificaciones.VerificarCookies" />
			<class name="Reservas.Reserva">
				<methods>
					<parameter name="room" value="" />
					<parameter name="dia" value="" />
					<parameter name="hora" value="" />
					<parameter name="citaReserva" value="" />
					<parameter name="infoDetails" value="" />
					
					<parameter name="testPlusMenosBtn" value="false" />
					
					<include name="selectedDay" />
					
					<include name="inputNumberPerson" />
					
					<include name="selectRoom" />
					<include name="selectHour" />
					<include name="realizarReserva">
						<parameter name="resultatEsperado" value="true" />
					</include>
					<include name="createBooking">
						<parameter name="aceptarComunicacionesComerciales" value="true" />
					</include>				
				</methods>
			</class>
			
			<!-- FIN -->
			
		</classes>
	
	</test>
	<!-- -->
	
	<!-- Realizar nueva reserva sin datos parametrados de Sala, Hora, día y hora  y volver a recrear otras nuevas reservas utilizando el button nueva reserva-->
	<test name="Prueba de realizar múltiple reserva simple con datos genericos (Sala, Hora, día de hoy y hora)." enabled="true" preserve-order="true">
		<parameter name="Url" value="https://booking00.hiopos.com/booking?data=%3D%3DQZzxWYm1jbp1GZhZSO2EDN2ETPklEcvh2c" />
		<parameter name="shop" value="43496" />
		<parameter name="existeRoom" value="true" />
		<parameter name="insertBooking" value="true" />
		<parameter name="ingresarDatosPorDefecto" value="true" /><!-- Seleccionar datos disponible a ingresar en la reserva   -->
		
		<classes>
			<class name="AbrePortalRest.AbrirUrl" />
			<class name="Verificaciones.VerificarCookies" />
			<class name="Reservas.CreateBooking">
				<methods>
					<parameter name="room" value="" />
					<parameter name="dia" value="" />
					<parameter name="hora" value="" />
					<parameter name="citaReserva" value="" />
					<parameter name="infoDetails" value="" />
					
					<parameter name="aceptarComunicacionesComerciales" value="true" />
					<parameter name="resultatEsperado" value="true" />
					
					<parameter name="testPlusMenosBtn" value="false" />
					
					<include name="repeatReserva">
						<parameter name="repeatBookingCount" value="2" />
					</include>
									
				</methods>
			</class>
			
			<!-- FIN -->
			
		</classes>
	
	</test>
	<!-- -->

	<!-- Realizar nueva reserva sin datos parametrados de Sala, Hora, día y hora. Luego al finalizar la reserva, verificar que llegue la notitficación al email del Cliente y del Restaurante  -->
	<test name="Prueba de realizar nueva reserva sin datos parametrados, con sala. Después verificar la llega de notificación de confirmación al Cliente y  al Restaurante" enabled="true" preserve-order="true">
		<parameter name="Url" value="https://booking00.hiopos.com/booking?data=%3D%3DQZzxWYm1jbp1GZhZSO2EDN2ETPklEcvh2c" />
		<parameter name="shop" value="43496" />
		<parameter name="existeRoom" value="true" />
		<parameter name="insertBooking" value="true" />
		<parameter name="ingresarDatosPorDefecto" value="true" /><!-- Seleccionar datos disponible a ingresar en la reserva   -->
		
		<classes>
			<class name="AbrePortalRest.AbrirUrl" />
			<class name="Verificaciones.VerificarCookies" />
			<class name="Reservas.CreateBooking">
				<methods>
					<parameter name="room" value="" />
					<parameter name="dia" value="" />
					<parameter name="hora" value="" />
					<parameter name="citaReserva" value="" />
					<parameter name="infoDetails" value="" />
					
					<parameter name="aceptarComunicacionesComerciales" value="true" />
					<parameter name="resultatEsperado" value="true" />
					
					<parameter name="testPlusMenosBtn" value="false" />
					
					<include name="createReservation" />
									
				</methods>
			</class>
			
			<!-- Validación email-->
			<class name="Reservas.Reserva">
				<methods>
					<include name="emailClientBooking">
						<parameter name="validateEmailRestaurante" value="false" />
					</include>
					
					<include name="emailRestaurantBooking">
						<parameter name="validateEmailCliente" value="false" />
					</include>

				</methods>
			</class>
			
			<class name="Reservas.VerificarReservas">
				<methods>
				
					<include name="validateBookingContentEmail">
						<parameter name="validateEmailCliente" value="true" />
						<parameter name="validateEmailRestaurante" value="true"/>
					</include>
					
				</methods>
			</class>
			
			<!--Fin-->
			
		</classes>
	</test>	
	<!-- -->

	<!-- Realizar nueva reserva con datos parametrados de Sala, Hora, día y hora. Luego al finalizar la reserva, verificar que llegue la notitficación al email del Cliente y del Restaurante  -->
	<test name="Prueba de realizar nueva reserva simple con datos parametrados Sala, Hora, día y hora. Luego verificar la notificación de confirmación al cliente y  al restaurante" enabled="true" preserve-order="true">
		<parameter name="Url" value="https://booking00.hiopos.com/booking?data=%3D%3DQZzxWYm1jbp1GZhZSO2EDN2ETPklEcvh2c" />
		<parameter name="shop" value="43496" />
		<parameter name="existeRoom" value="true" />
		<parameter name="insertBooking" value="true" />
		<parameter name="ingresarDatosPorDefecto" value="false" /><!-- Seleccionar datos disponible a ingresar en la reserva   -->
		
		<classes>
			<class name="AbrePortalRest.AbrirUrl" />
			<class name="Verificaciones.VerificarCookies" />
			<class name="Reservas.CreateBooking">
				<methods>
					<parameter name="room" value="Piscina" />
					<parameter name="dia" value="02/03/2023" />
					<parameter name="hora" value="14:00" />
					<parameter name="citaReserva" value="" />
					<parameter name="infoDetails" value="" />
					
					<parameter name="aceptarComunicacionesComerciales" value="true" />
					<parameter name="resultatEsperado" value="true" />
					
					<parameter name="testPlusMenosBtn" value="false" />
					
					<include name="createReservation" />
									
				</methods>
			</class>
			
			<class name="Reservas.Reserva">
				<methods>
					<include name="emailClientBooking">
						<parameter name="validateEmailRestaurante" value="false" />
					</include>
					
					<include name="emailRestaurantBooking">
						<parameter name="validateEmailCliente" value="false" />
					</include>

				</methods>
			</class>
			
			<class name="Reservas.VerificarReservas">
				<methods>
				
					<include name="validateBookingContentEmail">
						<parameter name="validateEmailCliente" value="true" />
						<parameter name="validateEmailRestaurante" value="true"/>
					</include>
					
				</methods>
			</class>
		</classes>
	</test>	
	<!-- -->

	<!--Comprobar que se puede utilizar la entra de datos desde el interfaz de usuario en Booking sin crear reserva -->
	<test name="Comprobar el funccionamiento de los botones(Pax de personar) mas o menos y el ingreso de datos en los campos de reservas" enabled="true" preserve-order="true">
		<parameter name="Url" value="https://booking00.hiopos.com/booking?data=%3D%3DQZzxWYm1jbp1GZhZSO2EDN2ETPklEcvh2c" />
		<parameter name="shop" value="43496" />
		<parameter name="existeRoom" value="true" />
		<parameter name="insertBooking" value="false" />
		
		<classes>
			<class name="AbrePortalRest.AbrirUrl" />
			<class name="Verificaciones.VerificarCookies" />
			<class name="Reservas.Reserva">
				<methods>
					<parameter name="room" value="Terrazza" />
					
					<parameter name="dia" value="" />
					<parameter name="hora" value="" />
					
					<parameter name="testPlusMenosBtn" value="true" />
					
					<include name="selectedDay" />
					
					<include name="verificarBotonesPlusMenos">
						<parameter name="numeroCliente" value="5" />
					</include>
					
					<include name="inputNumberPerson">
						<parameter name="numeroCliente" value="1" />
					</include>
					
					<include name="selectRoom">
						<parameter name="ingresarDatosPorDefecto" value="true" />
					</include>
					
					<include name="selectHour">	
						<parameter name="ingresarDatosPorDefecto" value="true" />
					</include>
					
					<include name="realizarReserva">
						<parameter name="ingresarDatosPorDefecto" value="true" />
						<parameter name="resultatEsperado" value="true" />
					</include>
					<include name="createBooking">
						<parameter name="ingresarDatosPorDefecto" value="true" />
						<parameter name="aceptarComunicacionesComerciales" value="true" />
						<parameter name="insertBooking" value="false" />
					</include>
								
				</methods>
			</class>
		</classes>
	
	</test>
	<!-- -->

<!-- Fin reserva con activación de sala en el apartado configuración reserva Modo cliente / Admin -->

<!--Realizar reservas con el checkbox salas deshabilitado en el apartado Configuración de reservas, es decir sin vista de salas en modo cliente / Admin>

	<test name="Prueba de reserva simple sin salas en booking de PortalRest" enabled="true" preserve-order="true">
		<parameter name="Url" value="https://booking00.hiopos.com/booking?data=%3D%3DQZzxWYm1jbp1GZhZCN5gTN2ETPklEcvh2c" />
		<parameter name="shop" value="43496" />
		
		<classes>
			<class name="AbrePortalRest.AbrirUrl" />
			<class name="Verificaciones.VerificarCookies" />
			<class name="Reservas.Reserva">
				<methods>
					<parameter name="dia" value="2" />
					<parameter name="hora" value="15:30" />
					<parameter name="numeroCliente" value="2" />
					
					<parameter name="testPlusMenosBtn" value="true" />
					
					<include name="selectedDay" />
										
					<include name="inputNumberPerson">
						<parameter name="numeroCliente" value="2" />
					</include>
					
					<include name="selectHour" />
					<include name="realizarReserva">
						<parameter name="resultatEsperado" value="true" />
					</include>
					
				</methods>
			</class>
		</classes>
	
	</test>-->
	
	<!--test name="Prueba Reading mail" enabled="true" preserve-order="true">
		<parameter name="Url" value="https://login.yahoo.com/" />
		<parameter name="textConfirmacionReservaAlCliente" value="" />
		
		<classes>
			
			<class name="AbrePortalRest.AbrirUrl" />
			<class name="Reservas.MailReading">
				<methods>
					<include name="openWebMail"></include>
					<include name="readEmailClient"></include>
				</methods>
			</class>
		
		</classes>
	</test-->
	
	<!-- Comprobar la descaga de correo electronico de yahoo mail-->
	<test name="Prueba de reserva simple para connectar en webmail yahoo" enabled="true" preserve-order="true">
		<parameter name="Url" value="https://booking00.hiopos.com/booking?data=%3D%3DQZzxWYm1jbp1GZhZSO2EDN2ETPklEcvh2c" />
		<parameter name="shop" value="43496" />
		
		<classes>
			<class name="Reservas.MailReading">
				<methods>
					<include name="readLastEmail"></include>
				</methods>
			</class>
		</classes>
		
	</test>
	
</suite>